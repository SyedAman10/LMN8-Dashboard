(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,r,t)=>{r.exports=e.r(76562)},73518,e=>{"use strict";e.s(["AuthProvider",()=>n,"useAuth",()=>u]);var r=e.i(43476),t=e.i(71645),o=e.i(18566);let s=(0,t.createContext)();function n(e){let{children:n}=e,[u,i]=(0,t.useState)(null),[c,a]=(0,t.useState)(!0),l=(0,o.useRouter)();(0,t.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let r=await e.json();i(r.user)}else i(null)}catch(e){console.error("Auth check failed:",e),i(null)}finally{a(!1)}},d=async function(e,r){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let o=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:r,rememberMe:t})}),s=await o.json();if(o.ok)return i(s.user),{success:!0,user:s.user};return{success:!1,error:s.error}}catch(e){return console.error("Login failed:",e),{success:!1,error:"Network error"}}},f=async e=>{try{let r=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await r.json();if(r.ok)return{success:!0,user:t.user};return{success:!1,error:t.error}}catch(e){return console.error("Signup failed:",e),{success:!1,error:"Network error"}}},y=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),console.log("Successfully signed out")}catch(e){console.error("Logout failed:",e)}finally{i(null),l.push("/login")}};return(0,r.jsx)(s.Provider,{value:{user:u,loading:c,login:d,signup:f,logout:y,checkAuth:h,isAuthenticated:!!u},children:n})}function u(){let e=(0,t.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}]);